(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6982],{82274:function(e,s,a){Promise.resolve().then(a.bind(a,42236))},42236:function(e,s,a){"use strict";a.d(s,{default:function(){return Q}});var l=a(66628),t=a(8793),c=a(78010),i=a(51747),n=a(12706),r=a(62159),o=a(51828),d=a(4035),u=a(93493),m=a(6906),x=a(43182),p=a(82746),h=a(46024),b=a(96656),f=a(38352),y=a(73610),j=a(80184),v=a(19660),N=a(89815),g=a(72850),w=a.n(g),_=a(54815),k=a(51643),C=a(26933),E=a(77669),P=a(88512),H=a(58220);a(73271);var S=a(96735),L=a(58635),U=a(38972),O=a(8551),J=a(56031),z=a(75698),A=a(57445),I=a.n(A),Z=a(84280),D=a(25690),R=a(89958);let B=new(I()).graphlib.Graph;B.setDefaultEdgeLabel(()=>({}));let F=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TB",l="LR"===a;return B.setGraph({rankdir:a}),e.forEach(e=>{B.setNode(e.id,{width:250,height:200})}),s.forEach(e=>{B.setEdge(e.source,e.target)}),I().layout(B),e.forEach(e=>{let s=B.node(e.id);return e.targetPosition=l?"left":"top",e.sourcePosition=l?"right":"bottom",e.position={x:s.x-125,y:s.y-100},e}),{nodes:e,edges:s}},T=(0,O.Ue)()((0,z.tJ)((e,s)=>({nodes:Z.Z,edges:D.Z,onNodesChange:a=>{e({nodes:(0,E.Fb)(a,s().nodes)})},onEdgesChange:a=>{e({edges:(0,E.yn)(a,s().edges)})},onConnect:a=>{e({edges:(0,E.Z_)(a,s().edges)})},onLayout:a=>{let{nodes:l,edges:t}=F(s().nodes,s().edges,a);e({nodes:l,edges:t})},setNodes:s=>{e({nodes:s})},setEdges:s=>{e({edges:s})},fetchNodesEdges:async s=>{let{cycle_id:a,apps_label:l}=s,t=await (0,j.B7)({cycle_id:a,apps_label:l}),{nodes:c,edges:i}=F(t.nodes.map(e=>{let{position:s,...a}=e;return{...a,position:{x:0,y:0}}}),t.edges.map(e=>{let{type:s,markerEnd:a,...l}=e;return{...l}}));e({nodes:c,edges:i})},updateNodeColor:(a,l)=>{e({nodes:s().nodes.map(e=>(e.id===a&&(e.data={...e.data,color:l}),e))})}}),{name:"base-diagram-storage",storage:{getItem:e=>{let s=localStorage.getItem(e);return s?J.ZP.parse(s):null},setItem:(e,s)=>{localStorage.setItem(e,J.ZP.stringify(s))},removeItem:e=>localStorage.removeItem(e)}}));var q=()=>T((0,R.N)(e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,onLayout:e.onLayout,fetchNodesEdges:e.fetchNodesEdges})));function V(e){if(e&&e.includes("*"))return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-2 h-2 bg-black rounded-full"}),(0,l.jsx)("span",{className:"pl-2",children:"Any"})]})}function G(e){return e&&e.includes("*")?(0,l.jsx)("img",{src:"/business_process/anyUser.png",alt:"icon",className:"absolute border -left-9 -top-1 w-10 h-10 rounded-full object-cover"}):null}let W={Start:e=>(0,l.jsxs)("div",{className:"flex flex-col justify-center w-60",children:[(0,l.jsx)("img",{src:"/business_process/BPD-start.svg",alt:"start-icon",className:" mx-auto w-32 h-32"}),(0,l.jsx)("div",{className:"flex justify-center w-max px-2 py-2 rounded-md border shadow-md shadow-safwa-gray-4 border-black bg-white",children:(0,l.jsx)("span",{children:e.data.label})}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Bottom,className:"opacity-0"})]}),WithEntry:e=>{var s,a;let[c,i]=h.useState(!1),n=e.data.label,r=e.data.listEntCondition;e.data.listExtCondition;let o=(null==r?void 0:r.pbt_data)||(null==r?void 0:r.cate_data),d=e.data.listRequirement;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-60",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex items-center justify-center w-48",children:[(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Top,className:"opacity-0"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Bottom,className:"opacity-0"}),(0,l.jsxs)("div",{className:"relative flex justify-center px-2 py-1 rounded-md border w-max shadow-md shadow-safwa-gray-4 border-black bg-[#c8c2f4]",children:[(0,l.jsxs)(_.J,{opened:c,closeOnClickOutside:!0,clickOutsideEvents:["click"],onClose:()=>i(!1),children:[(0,l.jsx)(_.J.Target,{children:(0,l.jsx)("span",{className:"absolute top-0 -right-10 cursor-pointer",onClick:()=>i(!0),children:(0,l.jsx)(t.JO,{icon:"material-symbols:list-alt-rounded",className:"w-8 h-8 text-safwa-blue-1"})})}),(0,S.createPortal)((0,l.jsxs)(_.J.Dropdown,{className:"shadow-md max-h-96",children:[(0,l.jsx)("span",{className:"absolute right-1 top-1 cursor-pointer",onClick:()=>i(!1),children:(0,l.jsx)(t.JO,{icon:"ep:close-bold",className:"w-6 h-6 text-safwa-red-2"})}),(0,l.jsxs)("div",{className:"pt-4 min-w-52 space-y-4 !z-100",children:[o&&(0,l.jsx)(k.U,{className:"m-0 p-0",children:(0,l.jsxs)(k.U.Item,{value:"list",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("span",{children:(0,l.jsx)(t.JO,{icon:"clarity:list-line",className:"w-8 h-8 text-safwa-blue-1"})}),(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:(null===(s=o[0])||void 0===s?void 0:s.pbt_name)?"List of PBT":(null===(a=o[0])||void 0===a?void 0:a.category)?"Category":""})]})}),(0,l.jsxs)(k.U.Panel,{className:"flex",children:[(0,l.jsx)("span",{className:"ml-3 w-1 bg-safwa-gray-4 h-auto"}),(0,l.jsx)("ul",{className:"space-y-4 scrollbar-custom overflow-y-scroll max-h-32",children:null==o?void 0:o.map((e,s)=>(0,l.jsxs)("li",{className:"flex relative item-center space-x-4",children:[(0,l.jsx)("span",{className:"absolute left-0 top-2 w-2 h-2 rounded-full bg-black"}),(0,l.jsx)("span",{children:(null==e?void 0:e.pbt_name)||(null==e?void 0:e.category)})]},s))})]})]})}),(0,l.jsx)(k.U,{children:(0,l.jsxs)(k.U.Item,{value:"user",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{children:(0,l.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,l.jsx)("span",{children:(0,l.jsx)(t.JO,{icon:"eos-icons:role-binding-outlined",className:"w-8 h-8 text-safwa-blue-1"})}),(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"List of users on this stage"})]})}),(0,l.jsx)(k.U.Panel,{children:(0,l.jsx)("span",{className:"ml-2",children:Array.isArray(null==r?void 0:r.user_id)?r.user_id.includes("*")?(0,l.jsxs)("span",{className:"relative flex space-x-4 items-center",children:[(0,l.jsx)("span",{className:"absolute w-2 h-2 rounded-full bg-black"}),(0,l.jsx)("span",{children:"Any"})]}):(0,l.jsx)("ul",{className:"space-y-4",children:r.user_id.map((e,s)=>(0,l.jsxs)("li",{className:"relative flex items-center",children:[(0,l.jsx)("span",{className:"absolute w-2 h-2 bg-black rounded-full"}),(0,l.jsx)("span",{className:"pl-4",children:e})]},s))}):(null==r?void 0:r.user_id)==="*"?"Any":null==r?void 0:r.user_id})})]})}),d&&(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{children:(0,l.jsx)(t.JO,{className:"w-8 h-8 text-safwa-blue-1",icon:"streamline:interface-file-clipboard-check-checkmark-edit-task-edition-checklist-check-success-clipboard-form"})}),(0,l.jsxs)("span",{children:["Requirement:"," ",d.chk_doc.includes("*")?"Any":d.chk_doc.map(e=>e)]})]})]})]}),document.body)]}),(0,l.jsx)("span",{className:"truncate",children:n})]})]})}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Left,className:"opacity-0",id:"a"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Right,className:"opacity-0",id:"b"})]})},WithExit:e=>{let[s,a]=h.useState(!1),c=e.data.label,i=e.data.action;e.data.listEntCondition;let n=e.data.listExtCondition;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-60 !-z-10",children:[(0,l.jsx)("div",{className:"flex justify-center w-48",children:(0,l.jsxs)("div",{className:"relative flex justify-center px-2 py-1 rounded-md border w-max shadow-md shadow-safwa-gray-4 border-black bg-[#c8c2f4]",children:[G((null==n?void 0:n.verifyrole_by)||(null==n?void 0:n.approverole_by)||(null==n?void 0:n.checkrole_by)),(0,l.jsx)("span",{className:"truncate",children:c})]})}),(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Top,className:"opacity-0"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Bottom,className:"opacity-0"}),(0,l.jsxs)("div",{className:"relative flex items-center justify-center w-[95px] h-[95px]",children:[(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Left,className:"opacity-0",id:"a"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Right,className:"opacity-0"}),(0,l.jsx)("div",{className:(0,L.Z)("Verified"===i?"bg-[#ADD8E6]":"Checked"===i?"bg-[#FFECB3]":"Approved"===i?"bg-[#90EE90]":"","absolute h-[70px] w-[70px] rotate-45 border rounded-sm border-black shadow-md shadow-safwa-gray-4")}),(0,l.jsx)("span",{className:"z-10",children:i}),(0,l.jsxs)(_.J,{opened:s,clickOutsideEvents:["click"],closeOnClickOutside:!0,onClose:()=>a(!1),children:[(0,l.jsx)(_.J.Target,{children:(0,l.jsx)("span",{className:"absolute bottom-3 cursor-pointer",onClick:()=>a(!0),children:(0,l.jsx)(t.JO,{icon:"mdi:information-variant-circle",className:"w-6 h-6 text-safwa-blue-1"})})}),(0,S.createPortal)((0,l.jsx)(_.J.Dropdown,{className:"shadow-md max-h-96",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"absolute top-2 right-2",onClick:()=>a(!1),children:(0,l.jsx)(t.JO,{icon:"iconamoon:close-fill",className:"w-8 h-8 cursor-pointer text-safwa-red-3"})}),(0,l.jsxs)(k.U,{children:[(0,l.jsxs)(k.U.Item,{value:"Action",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"pr-2",children:(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"List of role:"})}),(0,l.jsx)(k.U.Panel,{children:V((null==n?void 0:n.verifyrole_by)||(null==n?void 0:n.checkrole_by)||(null==n?void 0:n.approverole_by))})]}),(0,l.jsxs)(k.U.Item,{value:"User",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"pr-2",children:(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"Person in charge:"})})," ",(0,l.jsx)(k.U.Panel,{className:"max-h-32 overflow-y-scroll scrollbar-custom",children:V((null==n?void 0:n.verifyuser_by)||(null==n?void 0:n.checkuser_by)||(null==n?void 0:n.approveuser_by))})]}),(0,l.jsxs)(k.U.Item,{value:"Document",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"pr-2",children:(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"List of document:"})})," ",(0,l.jsx)(k.U.Panel,{children:V(null==n?void 0:n.chk_doc)})]})]})]})}),document.body)]})]})]})},WithEntryAndExit:e=>{var s,a;let[c,i]=h.useState(!1),[n,r]=h.useState(!1),o=e.data.label,d=e.data.action,u=e.data.listEntCondition,m=e.data.listExtCondition,x=(null==u?void 0:u.pbt_data)||(null==u?void 0:u.cate_data),p=e.data.listRequirement;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-60 ",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-48",children:(0,l.jsxs)("div",{className:"relative flex justify-center px-2 py-1 rounded-md border w-max shadow-md shadow-safwa-gray-4  border-black bg-safwa-purple-2",children:[G((null==m?void 0:m.verifyrole_by)||(null==m?void 0:m.approverole_by)||(null==m?void 0:m.checkrole_by)),(0,l.jsx)("span",{className:"truncate",children:o}),(0,l.jsxs)(_.J,{opened:c,closeOnClickOutside:!0,clickOutsideEvents:["click"],onClose:()=>i(!1),children:[(0,l.jsx)(_.J.Target,{children:(0,l.jsx)(U.E.span,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},className:"absolute top-0 -right-9 cursor-pointer",onClick:()=>i(!0),children:(0,l.jsx)(t.JO,{icon:"material-symbols:list-alt-rounded",className:"w-8 h-8 text-safwa-blue-1"})})}),(0,S.createPortal)((0,l.jsxs)(_.J.Dropdown,{className:"shadow-md max-h-96",children:[(0,l.jsx)("span",{className:"absolute right-1 top-1 cursor-pointer",onClick:()=>i(!1),children:(0,l.jsx)(t.JO,{icon:"ep:close-bold",className:"w-6 h-6 text-safwa-red-2"})}),(0,l.jsxs)("div",{className:"pt-4 min-w-52 space-y-4 !z-100",children:[x&&(0,l.jsx)(k.U,{className:"m-0 p-0",children:(0,l.jsxs)(k.U.Item,{value:"list",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("span",{children:(0,l.jsx)(t.JO,{icon:"clarity:list-line",className:"w-8 h-8 text-safwa-blue-1"})}),(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:(null===(s=x[0])||void 0===s?void 0:s.pbt_name)?"List of PBT":(null===(a=x[0])||void 0===a?void 0:a.category)?"Categories":""})]})}),(0,l.jsxs)(k.U.Panel,{className:"flex",children:[(0,l.jsx)("span",{className:"ml-3 w-1 bg-safwa-gray-4 h-auto"}),(0,l.jsx)("ul",{className:"space-y-4 scrollbar-custom overflow-y-scroll max-h-32",children:null==x?void 0:x.map((e,s)=>(0,l.jsxs)("li",{className:"flex relative item-center space-x-4",children:[(0,l.jsx)("span",{className:"absolute left-0 top-2 w-2 h-2 rounded-full bg-black"}),(0,l.jsx)("span",{children:(null==e?void 0:e.pbt_name)||(null==e?void 0:e.category)})]},s))})]})]})}),(0,l.jsx)(k.U,{children:(0,l.jsxs)(k.U.Item,{value:"user",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{children:(0,l.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,l.jsx)("span",{children:(0,l.jsx)(t.JO,{icon:"eos-icons:role-binding-outlined",className:"w-8 h-8 text-safwa-blue-1"})}),(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"List of users on this stage"})]})}),(0,l.jsx)(k.U.Panel,{children:(0,l.jsx)("span",{className:"ml-2",children:Array.isArray(null==u?void 0:u.user_id)?u.user_id.includes("*")?(0,l.jsxs)("span",{className:"relative flex space-x-4 items-center",children:[(0,l.jsx)("span",{className:"absolute w-2 h-2 rounded-full bg-black"}),(0,l.jsx)("span",{children:"Any"})]}):(0,l.jsx)("ul",{className:"space-y-4",children:u.user_id.map((e,s)=>(0,l.jsxs)("li",{className:"relative flex items-center",children:[(0,l.jsx)("span",{className:"absolute w-2 h-2 bg-black rounded-full"}),(0,l.jsx)("span",{className:"pl-4",children:e})]},s))}):(null==u?void 0:u.user_id)==="*"?"Any":null==u?void 0:u.user_id})})]})}),p&&(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{children:(0,l.jsx)(t.JO,{className:"w-8 h-8 text-safwa-blue-1",icon:"streamline:interface-file-clipboard-check-checkmark-edit-task-edition-checklist-check-success-clipboard-form"})}),(0,l.jsxs)("span",{children:["Requirement:"," ",p.chk_doc.includes("*")?"Any":p.chk_doc.map(e=>e)]})]})]})]}),document.body)]})]})}),(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Top,className:"opacity-0"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Bottom,className:"opacity-0"}),(0,l.jsxs)("div",{className:"relative flex items-center justify-center w-[95px] h-[95px]",children:[(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Left,className:"opacity-0",id:"a"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Right,className:"opacity-0",id:"b"}),(0,l.jsx)("div",{className:(0,L.Z)("Verified"===d?"bg-[#ADD8E6]":"Approved"===d?"bg-[#90EE90]":"Checked"===d?"bg-[#FFECB3]":"","absolute h-[70px] w-[70px] rotate-45 border rounded-sm shadow-md shadow-safwa-gray-4 border-black")}),(0,l.jsx)("span",{className:(0,L.Z)("","z-10"),children:d}),(0,l.jsxs)(_.J,{opened:n,closeOnClickOutside:!0,onClose:()=>r(!1),clickOutsideEvents:["click"],children:[(0,l.jsx)(_.J.Target,{children:(0,l.jsx)(U.E.span,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},className:"absolute top-[4.5rem] z-10 cursor-pointer hover:scale-125",onClick:()=>r(!0),children:(0,l.jsx)(t.JO,{icon:"mdi:information-variant-circle",className:"w-6 h-6 text-safwa-blue-1"})})}),(0,S.createPortal)((0,l.jsx)(_.J.Dropdown,{className:"shadow-md max-h-96",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"absolute top-2 right-2",onClick:()=>r(!1),children:(0,l.jsx)(t.JO,{icon:"iconamoon:close-fill",className:"w-8 h-8 cursor-pointer text-safwa-red-3"})}),(0,l.jsxs)(k.U,{children:[(0,l.jsxs)(k.U.Item,{value:"Action",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"pr-2",children:(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"List of role:"})}),(0,l.jsx)(k.U.Panel,{children:V((null==m?void 0:m.verifyrole_by)||(null==m?void 0:m.checkrole_by)||(null==m?void 0:m.approverole_by))})]}),(0,l.jsxs)(k.U.Item,{value:"User",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"pr-2",children:(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"Person in charge:"})})," ",(0,l.jsx)(k.U.Panel,{className:"max-h-32 overflow-y-scroll scrollbar-custom",children:V((null==m?void 0:m.verifyuser_by)||(null==m?void 0:m.checkuser_by)||(null==m?void 0:m.approveuser_by))})]}),(0,l.jsxs)(k.U.Item,{value:"Document",className:"border-b-0",children:[(0,l.jsx)(k.U.Control,{className:"pr-2",children:(0,l.jsx)("span",{className:"font-semibold text-safwa-blue-1",children:"List of document:"})})," ",(0,l.jsx)(k.U.Panel,{children:V(null==m?void 0:m.chk_doc)})]})]})]})}),document.body)]})]})]})},End:e=>(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-60",children:[(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Top,className:"opacity-0"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Bottom,className:"opacity-0"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Left,className:"opacity-0",id:"a"}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Right,className:"opacity-0"}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center w-48",children:[(0,l.jsx)("img",{src:"/business_process/LastStage.svg",alt:"",className:"w-40 h-w-40 z-10"}),(0,l.jsx)("div",{className:"flex justify-center px-2 py-1 -mt-2 rounded-md border w-max shadow-md shadow-safwa-gray-4 border-black bg-[#c8c2f4]",children:(0,l.jsx)("span",{className:"truncate",children:e.data.label})})]})]}),default:e=>(0,l.jsxs)("div",{className:"w-60",children:[(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Top,className:"opacity-0"}),(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Left,className:"opacity-0",id:"a"}),(0,l.jsx)(E.HH,{type:"target",position:E.Ly.Right,className:"opacity-0"}),(0,l.jsx)("div",{className:"flex justify-center w-48",children:(0,l.jsx)("div",{className:"flex justify-center px-2 py-1 rounded-md border w-max border-black bg-[#c8c2f4]",children:(0,l.jsx)("span",{className:"truncate",children:e.data.label})})}),(0,l.jsx)(E.HH,{type:"source",position:E.Ly.Bottom,className:"opacity-0"})]})};var M=e=>{let{disabled:s}=e,a=(0,C.useParams)(),i=(0,C.useSearchParams)(),n=a.cycle_id,o=i.get("selected_app"),[d,{open:u,close:m,toggle:p}]=(0,x.q)(!1),[b,f]=h.useState(!1),{nodes:y,edges:j,onNodesChange:N,onEdgesChange:g,onConnect:_,fetchNodesEdges:k}=q();return(0,l.jsxs)(E.tV,{children:[(0,l.jsx)(c.u,{centered:!0,opened:d,onClose:m,radius:"lg",transitionProps:{transition:"fade",duration:200},closeButtonProps:{icon:(0,l.jsx)(t.JO,{icon:"mingcute:close-fill",width:"1.2rem",height:"1.2rem",className:"!text-[var(--fc-brand-700)]"})},size:b?"xl":"xs",children:b?(0,l.jsx)("div",{style:{height:"80vh"},className:"jsx-1ca6d7df803b47ae",children:(0,l.jsxs)(E.x$,{nodes:y,edges:j,onNodesChange:N,onEdgesChange:g,onConnect:_,fitView:!0,fitViewOptions:{padding:.2},defaultEdgeOptions:{animated:!1,type:"step"},nodeTypes:W,nodesDraggable:!1,children:[(0,l.jsx)(P.A,{}),(0,l.jsx)(H.Z,{}),(0,l.jsxs)("span",{className:"jsx-1ca6d7df803b47ae absolute top-3 right-3 text-xs text-safwa-gray-3",children:["Cycle id: ",(0,l.jsx)("span",{className:"jsx-1ca6d7df803b47ae",children:n})]}),(0,l.jsx)("span",{className:"jsx-1ca6d7df803b47ae absolute right-2 bottom-1 text-[8px] text-safwa-gray-3",children:"Powered by Schinkels Technik"})]})}):(0,l.jsx)("div",{className:"jsx-1ca6d7df803b47ae grid place-items-center pb-12",children:(0,l.jsx)("h1",{className:"jsx-1ca6d7df803b47ae italic text-gray-500/50",children:"Diagram Not Found"})})}),(0,l.jsx)(r.z,{disabled:s,variant:"filled",color:"var(--fc-neutral-100)",c:"var(--fc-neutral-900)",radius:"md",size:"sm",fz:14,onClick:async()=>{await k({cycle_id:n,apps_label:o}).then(()=>f(!0)).catch(e=>{f(!1),v.Z.error(e.message)}).finally(()=>u())},classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"},children:"Business Process Diagram"}),(0,l.jsx)(w(),{id:"1ca6d7df803b47ae",children:".react-flow__panel.right{display:none}"})]})},Y=a(86954),$=a(14918),K=a(66254),Q=()=>{let[e,s]=h.useState(!1),[a,{open:t,close:i,toggle:n}]=(0,x.q)(!1),r=(0,C.useSearchParams)(),o=(0,C.useParams)();(0,C.useRouter)(),(0,C.usePathname)();let d=r.get("selected_app"),u=r.get("data_source"),m=o.cycle_id;o.stage_uuid;let{currentCycleInfo:p,setCycleInfo:b}=(0,K.Z)(),f=()=>s(!e);return h.useEffect(()=>{async function e(){b(await (0,j.M3)({apps_label:d,cycle_id:m,datasource_type:u}))}m&&d&&u&&e()},[m,u,d]),a?(0,l.jsx)(c.u,{opened:a,onClose:i,fullScreen:!0,radius:0,transitionProps:{transition:"fade",duration:200},withCloseButton:!1,children:(0,l.jsx)(X,{data:p,toggleEdit:f,isEdit:e,open:t,close:i,toggle:n})}):(0,l.jsx)(X,{data:p,toggleEdit:f,isEdit:e,open:t,close:i,toggle:n})};let X=e=>{var s;let{data:a,open:t,close:c,toggleEdit:m,isEdit:x,toggle:g}=e,{data:w}=(0,$.kP)(),_=null==w?void 0:null===(s=w.user)||void 0===s?void 0:s.user_id;(0,C.useRouter)();let k=(0,C.usePathname)(),E=(0,C.useParams)(),P=(0,C.useSearchParams)(),H="".concat(k,"?").concat(P);E.cycle_id,P.get("selected_app"),P.get("datasource_type");let S=[{name:"cycle_name",label:"Cycle name",type:"text",value:null==a?void 0:a.cycle_name,disabled:!0},{name:"cycle_id",label:"Cycle id",type:"text",value:null==a?void 0:a.cycle_id,disabled:!0},{name:"app_name",label:"Applications",type:"text",value:null==a?void 0:a.app_name,disabled:!0},{name:"cycle_created",label:"Date Created",type:"text",value:null==a?void 0:a.cycle_created,disabled:!0},{name:"cycle_updated",label:"Last edited date",type:"text",value:null==a?void 0:a.cycle_updated,disabled:!0},{name:"no_of_stages",label:"No of stage",type:"text",value:null==a?void 0:a.no_of_stages,disabled:!0},{name:"cycle_active",label:"Status",type:"radio",value:null==a?void 0:a.cycle_active,disabled:!x},{name:"cycle_description",label:"Description",type:"text",value:null==a?void 0:a.cycle_description,disabled:!x}],[U,O]=h.useState([]),J=(0,f.cI)({defaultValues:{cycle_active:"",cycle_description:"",cycle_id:"",app_name:"",cycle_updated:"",no_of_stages:"",cycle_name:""},values:{cycle_active:null==a?void 0:a.cycle_active,cycle_description:null==a?void 0:a.cycle_description,cycle_id:null==a?void 0:a.cycle_id,app_name:null==a?void 0:a.app_name,cycle_updated:null==a?void 0:a.cycle_updated,no_of_stages:null==a?void 0:a.no_of_stages,cycle_name:null==a?void 0:a.cycle_name}}),{control:z,handleSubmit:A,setValue:I}=J,Z=async e=>{var s,t;let c=(s=(null==a?void 0:a.cycle_active).toString(),e.cycle_active!==s),o=(t=null==a?void 0:a.cycle_description,e.cycle_description!==t);N.qk.open({title:"Confirm update",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.x,{size:"sm",children:["Are you sure you want to update ",(0,l.jsx)("strong",{children:"Cycle status & description"}),"?"]}),(0,l.jsxs)(n.Flex,{gap:16,justify:"end",mt:"md",children:[(0,l.jsx)(r.z,{onClick:()=>N.qk.closeAll(),color:"var(--fc-neutral-100)",c:"var(--fc-neutral-900)",radius:"md",children:"Cancel"}),(0,l.jsx)(r.z,{onClick:async()=>{if(!c&&!o){v.Z.error("No changes detected"),N.qk.closeAll(),m();return}try{await (0,j.U1)({cycle_uuid:null==a?void 0:a.cycle_uuid,body:{cycle_description:e.cycle_description,cycle_active:e.cycle_active}}).then(async s=>{if(s.error)throw Error(s.error_message);v.Z.success(s.message),await (0,j.Vh)({action:"update_cycle_info",location_url:H,object:"src/app/cycle/_components/Forms/GeneralForm.tsx",process_state:"TRIGGERAPI",sysfunc:'"onSubmit" func',userid:_,sysapp:"FLOWCRAFTBUSINESSPROCESS",notes:"Cycle status and description updated successfully",json_object:e}).then(()=>{window.location.reload()})})}catch(e){v.Z.error("".concat(e.message))}N.qk.closeAll(),m()},color:"var(--fc-brand-700)",radius:"md",children:"Yes"})]})]}),overlayProps:{backgroundOpacity:.55,blur:10},radius:"md"})};return h.useEffect(()=>{(async function(){O(await (0,j.JZ)())})()},[]),(0,p.a)("(max-height: 768px)"),(0,l.jsx)(f.RV,{...J,children:(0,l.jsxs)("form",{className:(0,L.Z)("space-y-4 w-full"),onSubmit:A(Z),onError:e=>console.log(e),children:[(0,l.jsx)(b.Z,{type:"general",toggleEdit:m,isEdit:x,toggleExpand:g}),(0,l.jsx)(o.ScrollAreaAutosize,{className:"h-[calc(100vh-231.5px)]",children:(0,l.jsxs)("div",{className:"container mx-auto space-y-8 pt-4 pb-10",children:[(0,l.jsx)(ee,{}),null==S?void 0:S.map((e,s)=>{let{label:a,name:t,type:c,value:i,disabled:n}=e;return["Status"].includes(a)?(0,l.jsxs)(d.S,{label:a,classNames:{root:"px-14 space-y-4",label:"!text-sm !font-semibold"},children:[(0,l.jsx)(Y.Z,{label:a}),(0,l.jsx)(y.Ee,{name:t,control:z,defaultValue:null==i?void 0:i.toString(),children:(0,l.jsx)(u.Z,{children:null==U?void 0:U.map(e=>(0,l.jsx)(y.Y8.Item,{disabled:n,value:e.code,label:(0,l.jsx)("span",{className:"capitalize",children:e.descriptions})},e.uuid))})})]},s):(0,l.jsxs)(d.S,{label:a,classNames:{root:"px-14 space-y-4",label:"!text-sm !font-semibold"},children:[(0,l.jsx)(Y.Z,{label:a}),(0,l.jsx)(y.oi,{name:t,defaultValue:i,control:z,disabled:n,classNames:{input:"!rounded-lg p-6 w-full focus:outline-none focus:ring-2 focus:ring-[var(--fc-brand-700)] focus:border-transparent transition-all duration-300 ease-in-out disabled:!bg-[#F1F4F5] disabled:border-transparent disabled:text-black"}})]},s)})]})})]})})};function ee(){let e=(0,C.useRouter)();return"database"===(0,C.useSearchParams)().get("data_source")&&(0,l.jsxs)("div",{className:"flex justify-end py-2 px-14",children:[(0,l.jsx)(m.A,{disabled:!0,variant:"filled",color:"var(--fc-brand-700)",size:"lg",radius:"md","aria-label":"Settings",mr:"auto",onClick:()=>e.refresh(),children:(0,l.jsx)(t.JO,{className:"rounded",icon:"heroicons-outline:refresh",width:"1rem",height:"1rem"})}),(0,l.jsx)(M,{})]})}},96656:function(e,s,a){"use strict";var l=a(66628),t=a(8793),c=a(62159),i=a(58635),n=a(26933);a(46024),s.Z=e=>{let{toggleEdit:s,isEdit:a,toggleExpand:r,type:o,isFullscreen:d}=e,u=(0,n.useSearchParams)(),m=(0,n.usePathname)(),x="database"===u.get("data_source"),p="profile"===o,h="stages"===o,b="general"===o;if(!o)throw Error("type is required");let f=[{label:"Duplicate",type:"button",disabled:h&&!a,canShow:x&&h&&!a,onClick:()=>{},variant:"filled",color:"var(--fc-neutral-100)",c:"var(--fc-neutral-900)",radius:"md",size:"sm",fz:14,classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"},icon:(0,l.jsx)(t.JO,{width:"1rem",icon:"heroicons-outline:duplicate"})},{label:"Delete",type:"button",disabled:!0,canShow:x&&!a,onClick:()=>{},variant:"filled",color:"var(--fc-neutral-100)",c:"var(--fc-neutral-900)",radius:"md",size:"sm",fz:14,classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"},icon:(0,l.jsx)(t.JO,{width:"1rem",icon:"heroicons-outline:trash"})},{label:"Edit",type:"button",disabled:!1,canShow:!!s&&(x||p)&&!a,onClick:s,variant:"filled",color:p?"var(--fc-neutral-100)":"var(--fc-brand-700)",c:p?"var(--fc-neutral-900)":"default",radius:"md",size:"sm",fz:14,classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"},icon:(0,l.jsx)(t.JO,{width:"1rem",icon:"heroicons-outline:pencil-alt"})},{label:"Close",type:"button",disabled:!1,canShow:x&&h&&a,onClick:s,variant:"white",color:"var(--fc-neutral-100)",c:"var(--fc-neutral-900)",radius:"md",size:"sm",fz:14,classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"}},{label:"Save",type:"submit",disabled:!1,canShow:(x&&b||p)&&a,onClick:()=>{},variant:"filled",color:"var(--fc-brand-700)",radius:"md",size:"sm",fz:14,classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"}},{label:"Cancel",type:"button",disabled:!1,canShow:(x&&b||p)&&a,onClick:s,variant:"white",color:"var(--fc-neutral-100)",c:"var(--fc-neutral-900)",radius:"md",size:"sm",fz:14,classNames:{root:"disabled:!bg-[#f1f3f5] disabled:!text-[#adb5bd]"}}];return(0,l.jsxs)("div",{className:(0,i.Z)("flex px-14 py-6 items-center border-b",x&&b&&"justify-end"),children:[p?m.includes("/profile")?(0,l.jsx)("h1",{className:"text-2xl font-semibold mr-auto",children:"Profile Details"}):m.includes("/security")?(0,l.jsx)("h1",{className:"text-2xl font-semibold mr-auto",children:"Change Password"}):m.includes("/activities")?(0,l.jsx)("h1",{className:"text-2xl font-semibold mr-auto",children:"Activity Timeline"}):null:null,(x||p)&&(0,l.jsx)(l.Fragment,{children:b||p?(0,l.jsx)("div",{className:"flex gap-4",children:f.map((e,s)=>{let{label:a,canShow:t,icon:i,...n}=e;return t&&(0,l.jsx)(c.z,{...n,leftSection:i,children:a},s)})}):(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Stage Information"})}),!x&&(0,l.jsxs)(l.Fragment,{children:[b&&(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"General Information"}),h&&(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Stage Information"})]})]})}},86954:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var l=a(66628),t=a(8793),c=a(46738);let i=e=>{let{onMouseEnter:s,label:a}=e;return(0,l.jsx)(c.u,{label:a,children:(0,l.jsx)(t.JO,{icon:"mingcute:information-fill",width:"0.7rem",height:"0.7rem",className:"!mb-2 !ml-0.5 cursor-pointer text-black/80 hover:text-black/70",onMouseEnter:s})})}}},function(e){e.O(0,[5767,3610,8435,9220,2159,1251,8437,6249,1828,8592,8863,6738,9095,4918,8786,4825,8972,3609,6254,6218,6862,1744],function(){return e(e.s=82274)}),_N_E=e.O()}]);